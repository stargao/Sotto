<div data-role="dialog" data-close-btn="none" data-dialog="true" class="edit-category">
    <div data-role="header" data-tap-toggle="false" data-position="fixed" data-transition="slide">
        <a href="#back" data-rel="back" data-icon="ion-chevron-left" data-iconpos="notext" data-ajax="false" class="ui-btn-left"></a>
        <h1 class="header-title">修改分类</h1>
        <!--a href="#" class="ui-btn ui-btn-inline ui-btn-d ui-clear ui-mini ui-btn-right top-btn">保 存</a-->
    </div>

    <div role="main" class="ui-content change-content-frame">
        <form>
            <label for="modified-category-name">修改分类名称:</label>
            <input type="text" name="modified-category-name" id="modify-category-name" value="">
            <button type="button" class="ui-btn ui-btn-d" data-transition="flip" id="modify-category-name-btn">确认</button>
            <a href="#" class="ui-btn ui-btn-d ui-clear cancel-btn" data-rel="back">放弃</a>
        </form>
    </div>
    <script>
        $('#modify-category-name').val(window.categoryChangeName);

        function onUpdateCategorySuccess(data, textStatus, jqXHR) {
            setTimeout(function(){
                $('.edit-category .cancel-btn').click();
            }, 800);
        }

        function onUpdateCategoryFailure(jqXHR, textStatus, errorThrown) {

        }

        function updateCategoryName() {
            var categoryChangeName = $('#modify-category-name').val();
            $.post(window.categoryChangeLink,
                {_method: 'put', session_id: window.sessionId, name: categoryChangeName},
                onUpdateCategorySuccess, 'json').fail(onUpdateCategoryFailure);
        }

        $('#modify-category-name-btn').click(updateCategoryName);
    </script>
</div>
